# Email-auto-sending
Автоматизация рассылок на Tilda  с помощью YCF

## Задача проекта

Допустим, у вас есть сайт на Tilda. Кроме всего прочего, посетители сайта могут оставлять свои контактные данные (имя, email) и, возможно, какую-то еще информацию.
Было бы здорово, если бы почти сразу после заполнения анкеты на сайте посетитель получил бы от вас приветственный email  и/или с какой-то полезной информацией.
И особенно было бы здорово, если бы этот весь этот процесс (получение email нового посетителя с анкеты на Tilda и отправка на него приветственного письма, в том числе с обращением по имени) происходил бы автоматически. Это возможно реализовать с помощью Yandex Cloud Functions (YCF) в комбинации с сервисом почтовых рассылок (в данном случае был выбран Unisender).

## Как работает данная программа

1. Для получения информации из анкеты с вашего сайта на Tilda необходимо подключить вебхук по следующей инструкции https://help-ru.tilda.cc/forms/webhook
При этом в поле `WEBHOOK URL` надо будет указать ссылку для вызова функции на YCF (об этом ниже), которая по своей сути и является вебхуком.
2. Для отправки писем в данном случае был выбран Unisender и его метод https://www.unisender.com/ru/support/api/messages/sendemail  
Чтобы воспользоваться данным методом рассылки, надо зарегистрироваться на сайте www.unisender.com, после чего получить ключ доступа к API для отправки писем (переменная `api_key` в скрипте `webhook_sender.py`).
3. Затем скрипт из файла `webhook_sender.py` помещаем в новую функцию на YCF: https://cloud.yandex.ru/services/functions
4. В скрипте созданной функции на YCF необходимо вставить индивидуальные данные: `api_key` (полученный от  Unisender) и `sender_email` (email отправителя).  
5. После создания данной функции, надо сделать ее  публичной (в разделе "Обзор").

Отправка писем с формы на Tilda автоматизирована!
